# CF挂机助手

一个基于 OpenCV 和 PyAutoGUI 的穿越火线自动点击脚本工具，支持图形化界面操作、目标图像识别、自动点击以及全局热键控制。

## 功能特性

- 图形化用户界面，简单易用
- 支持导入多个目标图片进行自动识别与点击
- 使用 OpenCV 实现高精度模板匹配（支持多尺度匹配）
- 可自定义全局快捷键启动与停止（默认 F11 启动，F12 停止）
- 鼠标点击采用 Win32 API 实现，提高游戏内识别率
- 同时识别并依次点击多个匹配图片，以应对结束时跳出的推荐购买等各种弹窗
- 支持窗口置顶，保证辅助界面不被遮挡
- 支持刷新识别库图片列表
- 自动踢人功能，解决房内进狗踢人时无法及时操作的问题
- 反挂机检测，自动执行鼠标点击和键盘操作，防止无操作被判定挂机踢出去
- 支持自定义反挂机检测时间间隔（默认 0.3 分钟）
- 支持倒计时关机功能，可设置自动关机时间
- 支持日志输出，方便排查问题
- 多尺度模板匹配，支持不同分辨率屏幕
- 按 y 坐标排序点击，避免下方模板被上方模板遮挡

## 使用说明

1. **管理员权限启动程序！管理员权限启动程序！管理员权限启动程序！**（重要的事说三遍！）
2. 点击“添加模板”，选择需识别点击的按钮截图
3. 可在程序根目录下的“templates”文件夹内批量导入多个需要识别的图片文件
4. （可选）勾选“置顶窗口”，保证辅助界面不被遮挡
5. 设置全局热键（默认 F11 启动，F12 停止）
6. 点击“开始挂机”或按下设定热键开始自动识别并点击
8. **反挂机检测**：默认每 0.3 分钟执行一次反挂机动作，包括随机点击鼠标和按下 WASD 按键
9. **倒计时关机**：可设置自动关机时间，到时会自动执行关机操作
10. 可通过“停止挂机”或热键终止操作

## 注意事项

- 程序需要管理员权限才能正常运行
- 模板图片建议截取清晰的按钮或目标区域，避免背景干扰
- 模板图片不宜过大，以提高识别速度和准确率
- 反挂机检测功能建议保持开启状态，以避免被游戏判定为挂机
- 倒计时关机功能请谨慎使用，确保保存好游戏进度

## 常见问题

1. **程序无法启动**：请确保以管理员权限运行程序
2. **无法识别目标**：检查模板图片是否清晰，截取区域是否合适，可尝试调整模板图片
3. **点击不准确**：尝试重新截取模板图片，确保截取的是目标的中心区域
4. **热键不生效**：请确保安装了 pynput 库，或检查热键设置是否正确

## 更新日志

- 修复了新赛季踢人功能有时无法使用的问题
- 优化了部分功能的执行
- 新增倒计时关机功能
- 优化反挂机检测动作，增加键盘操作
- 实现多尺度模板匹配，支持不同分辨率
- 按 y 坐标排序点击，提高点击成功率
- 优化了代码结构，提高稳定性

## 技术说明

- 使用 OpenCV 进行模板匹配
- 使用 Win32 API 进行鼠标和键盘操作
- 使用 Tkinter 构建图形化界面
- 使用 pynput 实现全局热键（可选）
- 支持 EXE 打包运行
